<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Eingabemaske</title>
  <link rel="stylesheet" href="./css/bootstrap.min.css">
  <link rel="stylesheet" href="./css/suedleder-color.css">
  <link rel="stylesheet" href="./css/eingabemaske.css">
  <!-- Doppelte Einbindung der CSS-Datei entfernt -->
  <script defer src="./js/jquery.min.js"></script>
  <script defer src="./js/bootstrap.bundle.min.js"></script>
  <script defer src="./js/eingabemaske.js"></script>
</head>
<body class="d-flex flex-column min-vh-100">
  <!-- Header (Seitenkopf) -->
  <div class="container-fluid">
    <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
      <a href="/eingabemaske.html" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
        <img class="logo" src="./pictures/Suedleder_Logo.svg" alt="Südleder Logo">
        <span class="fs-4">Akkordarbeit</span>
      </a>
      <ul class="nav nav-pills">
        <li class="nav-item"><a href="#" class="nav-link active" aria-current="page">Home</a></li>
      </ul>
    </header>
  </div>

  <!-- Hauptinhalt -->
  <main class="container-fluid flex-grow-1">
    <form>
      <!-- Globaler Header: Spaltenüberschriften jeweils zentriert -->
      <div class="eingabemaske-global-header d-flex">
        <div style="flex:2; text-align: center;">Mitarbeiter</div>
        <div style="flex:10" class="d-flex">
            <div style="flex:1; text-align: center;">Kostenstelle</div>
            <div style="flex:2; text-align: center;">Nebenzeiten</div>
            <div style="flex:1; text-align: center;">Gewichtsklasse</div>
            <div style="flex:1; text-align: center;">Stückzahl</div>
            <div style="flex:1; text-align: center;">VGZ</div>
            <div style="flex:1; text-align: center;">Gebr. Min.</div>
            <div style="flex:1; text-align: center;">Std. Zuschlag</div>
        </div>
      </div>
      
      <!-- Container für alle dynamischen Eingabemasken -->
      <div id="eingabemaske-container">
        <!-- Erste Eingabemaske (Template für neue Zeilen) -->
        <div class="eingabemaske-row border rounded p-2" style="background-color: #f8f9fa;">
          <!-- Mitarbeiterspalte -->
          <div class="employee-container" style="flex:2;">
            <div class="dropdown-menu d-block position-relative pt-0 mx-0 rounded-3 shadow" data-bs-theme="light">
              <form>
                <input type="search" class="form-control" autocomplete="off" placeholder="Mitarbeiter">
              </form>
              <!-- Absolut positionierte Ergebnisliste, die den Container nicht vergrößert -->
              <ul class="list-unstyled mb-0" style="
                    position: absolute;
                    top: 100%;
                    left: 0;
                    width: 100%;
                    display: none;
                    z-index: 1050;
                    background-color: #fff;
                    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                    ">
                <li>
                  <a class="dropdown-item d-flex align-items-center gap-2 py-2" href="#">
                    <span class="d-inline-block bg-success rounded-circle p-1"></span>
                    (5111) Peter Lustig
                  </a>
                </li>
                <li>
                  <a class="dropdown-item d-flex align-items-center gap-2 py-2" href="#">
                    <span class="d-inline-block bg-primary rounded-circle p-1"></span>
                    (5120) Max Mustermann
                  </a>
                </li>
                <li>
                  <a class="dropdown-item d-flex align-items-center gap-2 py-2" href="#">
                    <span class="d-inline-block bg-danger rounded-circle p-1"></span>
                    (5153) Marco Polo
                  </a>
                </li>
              </ul>
            </div>
             <!-- Mitarbeiter-Aktionen: Minus Button (für Mitarbeiter entfernen) -->
            <div class="employee-actions" style="display: flex; align-items: center;">
              <button type="button" class="btn btn-outline-danger minus-eingabemaske" style="display: none;">Mitarbeiter löschen</button>
            </div>
          </div>
          
          <!-- Innerer Container (alle Felder ab Kostenstelle) -->
          <div class="inner-container" style="flex:10;">
            <!-- Wrapper für innere Abschnitte -->
            <div class="inner-section-wrapper">
              <!-- Erster innerer Abschnitt -->
              <div class="eingabemaske-abschnitt">
                <div class="d-flex w-100 gap-1">
                  <!-- Kostenstelle -->
                  <div style="flex:1;">
                    <div class="dropdown-menu d-block position-relative pt-0 mx-0 rounded-3 shadow" data-bs-theme="light">
                      <form>
                        <input type="search" class="form-control" autocomplete="off" placeholder="Kostenstelle">
                      </form>
                      <ul class="list-unstyled mb-0" style="position: absolute; top: 100%; left: 0; width: 100%; display: none;">
                        <li>
                          <a class="dropdown-item d-flex align-items-center gap-2 py-2" href="#">310</a>
                        </li>
                        <li>
                          <a class="dropdown-item d-flex align-items-center gap-2 py-2" href="#">305</a>
                        </li>
                        <li>
                          <a class="dropdown-item d-flex align-items-center gap-2 py-2" href="#">303</a>
                        </li>
                      </ul>
                    </div>
                    <div class="cost-center-actions" style="text-align: right; margin-top: 5px;">
                      <button type="button" class="btn btn-outline-danger minus-inner-section" style="display:none">Kostenstelle löschen</button>
                    </div>
                  </div>
                  
                  
                  <!-- Nebenzeiten -->
                  <div style="flex:2;">
                    <div class="nebenzeiten-group">
                      <div class="d-flex input-group mb-1 nebenzeiten-row">
                        <div class="nebenzeitenDropdown dropdown-menu d-block position-relative pt-0 mx-0 rounded-3 shadow" data-bs-theme="light">
                          <form class="">
                            <input type="search" class="form-control" autocomplete="off" placeholder="Nebenzeit">
                          </form>
                          <ul class="list-unstyled mb-0" style="position: absolute; top: 100%; left: 0; width: 100%; display: none;">
                            <li>
                              <a class="dropdown-item d-flex align-items-center gap-2 py-2" href="#">Vorgang 1</a>
                            </li>
                            <li>
                              <a class="dropdown-item d-flex align-items-center gap-2 py-2" href="#">Vorgang 2</a>
                            </li>
                          </ul>
                        </div>
                        <input type="number" name="nebenzeiten_number[]" class="form-control minutenEingabe" placeholder="Minuten">
                      </div>
                      <div>
                        <!-- Plus-Button für neue Nebenzeit-->
                        <button type="button" class="btn btn-outline-secondary add-nebenzeiten">+</button>
                        <!-- Minus-Button für neue Nebenzeit-->
                        <button type="button" class="btn btn-outline-danger minus-nebenzeiten" style="display:none">-</button>
                      </div>
                    </div>
                  </div>
  
                  <!-- Gruppe: Gewichtsklasse, Stückzahl & VGZ -->
                  <div class="gewichtsklasse-group" style="flex:3;">
                    <div class="d-flex gap-1 gewichtsklasse-row mb-1">
                      <!-- Gewichtsklasse -->
                      <div style="flex:1;">
                        <div class="dropdown-menu d-block position-relative pt-0 mx-0 rounded-3 shadow" data-bs-theme="light">
                          <form>
                            <input type="search" class="form-control" autocomplete="off" placeholder="Gewichtsklasse">
                          </form>
                          <ul class="list-unstyled mb-0" style="
                                position: absolute;
                                top: 100%;
                                left: 0;
                                width: 100%;
                                display: none;
                                z-index: 1050;
                                background-color: #fff;
                                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                                ">
                            <li>
                              <a class="dropdown-item d-flex align-items-center gap-2 py-2" href="#">Bitte wählen</a>
                            </li>
                            <li>
                              <a class="dropdown-item d-flex align-items-center gap-2 py-2" href="#">Gewichtsklasse 1</a>
                            </li>
                            <li>
                              <a class="dropdown-item d-flex align-items-center gap-2 py-2" href="#">Gewichtsklasse 2</a>
                            </li>
                            <li>
                              <a class="dropdown-item d-flex align-items-center gap-2 py-2" href="#">Gewichtsklasse 3</a>
                            </li>
                          </ul>
                        </div>
                      </div>

                      <!-- Stückzahl -->
                      <div style="flex:1;">
                        <input type="number" name="stueckzahl[]" class="form-control" placeholder="Stückzahl">
                      </div>

                      <!-- VGZ -->
                      <div style="flex:1;">
                        <input type="text" name="vgz[]" class="form-control" placeholder="VGZ">
                      </div>
                    </div>

                    <div>                      
                      <div>
                        <!-- Plus‑Button für Gewichtsklasse -->
                        <button type="button" class="btn btn-outline-secondary add-gewichtsklasse">+</button>
                        <!-- Minus-Button für Gewichtsklasse-->
                        <button type="button" class="btn btn-outline-danger minus-gewichtsklasse" style="display:none">-</button>
                      </div>
                    </div>
                  </div>

                  <!-- Gebrauchte Minuten -->
                  <div style="flex:1;">
                    <input type="number" name="gebrauchteMinuten[]" class="form-control">
                  </div>
                  
                  <!-- Stundenzuschlag -->
                  <div style="flex:1;">
                    <select name="stundenzuschlag[]" class="form-select" data-live-search="true" title="Stundenzuschlag wählen">
                      <option value="">0%</option>
                      <option value="1">10%</option>
                      <option value="2">25%</option>
                      <option value="3">40%</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <!-- Button für einen neuen inneren Abschnitt -->
            <div class="inner-section-button">
              <button type="button" class="btn btn-outline-secondary add-inner-section">Weitere Kostenstelle</button>
            </div>
          </div>
          
        </div>
      </div>
      <!-- Gesamt-Plus-Button: Dieser Button wird immer unter der letzten Zeile angezeigt -->
      <div class="mt-2">
        <button type="button" class="btn btn-outline-secondary add-eingabemaske">Neuer Mitarbeiter</button>
      </div>
    </form>
  </main>

  <!-- Footer -->
  <footer class="container mt-auto">
    <div class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
      <div class="col-md-4 d-flex align-items-center">
        <span class="mb-3 mb-md-0 text-body-secondary">© 2025 Südleder</span>
      </div>
    </div>
  </footer>

    <!-- Custom Confirm Modal -->
    <div class="modal fade" id="confirmModal" tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="confirmModalLabel">Mitarbeiter hinzufügen</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Schließen"></button>
          </div>
          <div class="modal-body">
            Soll die erste Eingabemaske kopiert werden (alle Inhalte außerhalb des Mitarbeiters beibehalten)?
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" id="modalCancel">Neue leere Zeile</button>
            <button type="button" class="btn btn-primary" id="modalConfirm">Zeile kopieren</button>
          </div>
        </div>
      </div>
    </div>

</body>
</html>
